name = "vibepulse-api"
main = "src/index.ts"
compatibility_date = "2024-01-01"

# D1 Database
[[d1_databases]]
binding = "survey_db"
database_name = "survey-db"
database_id = "56ac87f7-be03-4319-aed2-50cae291e1d7"

# KV Namespace
[[kv_namespaces]]
binding = "vibepulse_cache"
id = "6395f5c06a634815905802f7608aa4d1"

# R2 Bucket for images
[[r2_buckets]]
binding = "vibepulse_images"
bucket_name = "vibepulse-images"

# ============================================
# Development
# ============================================
[env.dev.vars]
ENVIRONMENT = "development"
ALLOWED_ORIGINS = "http://localhost:5173"

# ============================================
# Production
# ============================================
[env.production.vars]
ENVIRONMENT = "production"
ALLOWED_ORIGINS = "https://vibepulse.pages.dev"

[env.production]
name = "vibepulse-api"

[[env.production.d1_databases]]
binding = "survey_db"
database_name = "survey-db"
database_id = "56ac87f7-be03-4319-aed2-50cae291e1d7"

[[env.production.kv_namespaces]]
binding = "vibepulse_cache"
id = "6395f5c06a634815905802f7608aa4d1"

[[env.production.r2_buckets]]
binding = "vibepulse_images"
bucket_name = "vibepulse-images"

# Local dev settings
[dev]
port = 8787

# Secrets (set via: wrangler secret put CLERK_SECRET_KEY)
# - CLERK_SECRET_KEY
